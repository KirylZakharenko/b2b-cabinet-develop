BX.namespace("BX.Sale.PersonalProfileComponent"),BX.Sale.PersonalProfileComponent.PersonalProfileDetail={init:function(t){BX.type.isPlainObject(t)&&(this.ajaxUrl=t.ajaxUrl);var e=document.getElementsByClassName("sale-personal-profile-detail-property-file");Array.prototype.forEach.call(e,(function(t){var e=t.getElementsByClassName("profile-property-input-delete-file")[0];BX.bindDelegate(t,"click",{class:"profile-property-check-file"},BX.proxy((function(t){""!=e.value?(idList=e.value.split(";"),-1===idList.indexOf(t.target.value)?e.value=e.value+";"+t.target.value:(idList.splice(idList.indexOf(t.target.value),1),e.value=idList.join(";"))):e.value=t.target.value}),this))}));var a=document.getElementsByClassName("input-add-multiple");for(var i in a){var r=a[i];!BX.type.isDomNode(r)&&BX.type.isNotEmptyString(this.ajaxUrl)||BX.bind(r,"click",BX.delegate((function(t){switch(t.target.getAttribute("data-add-type")){case"LOCATION":this.createLocationInput(t);break;case"TEXT":this.createTextInput(t);break}}),this))}},createTextInput:function(t){if(BX.type.isDomNode(t.target)){var e=BX.create("input",{attrs:{className:"form-control mb-2",type:"text",name:t.target.getAttribute("data-add-name")}});t.target.parentNode.insertBefore(e,t.target)}},createLocationInput:function(t){var e=parseInt(t.target.getAttribute("data-add-last-key"))+1;BX.ajax({method:"POST",dataType:"html",url:this.ajaxUrl,data:{sessid:BX.bitrix_sessid(),params:{LOCATION_NAME:t.target.getAttribute("data-add-name"),LOCATION_TEMPLATE:t.target.getAttribute("data-add-template"),LOCATION_KEY:e,ACTION:"getLocationHtml"},signedParamsString:this.signedParams},onsuccess:BX.proxy((function(a){var i=BX.create("div");i.innerHTML=a,t.target.parentNode.insertBefore(i,t.target),t.target.setAttribute("data-add-last-key",e)}),this),onfailure:BX.proxy((function(){return this}),this)},this)}};